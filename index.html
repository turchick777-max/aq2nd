<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AQUINTAQA - How It Works</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: #fff;
      color: #1a1a1a;
    }
    
    .screen2 {
      min-height: 100vh;
      position: relative;
      display: flex;
      flex-direction: column;
    }
    
    /* Мелкая CAD-сетка watermark 5-8% opacity */
    .screen2::before {
      content: '';
      position: absolute;
      inset: 0;
      background-image: 
        linear-gradient(rgba(0,80,120,0.05) 1px, transparent 1px),
        linear-gradient(90deg, rgba(0,80,120,0.05) 1px, transparent 1px);
      background-size: 20px 20px;
      pointer-events: none;
    }
    
    /* Тонкая рамка */
    .screen2::after {
      content: '';
      position: absolute;
      top: 20px;
      left: 20px;
      right: 20px;
      bottom: 20px;
      border: 1px solid rgba(0,80,120,0.08);
      pointer-events: none;
    }
    
    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 60px 5%;
      position: relative;
      z-index: 1;
      flex: 1;
      display: flex;
      flex-direction: column;
    }
    
    /* Header - только заголовок */
    .section-header {
      text-align: center;
      margin-bottom: 40px;
    }
    
    .section-title {
      font-size: 14px;
      font-weight: 500;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      color: #64748b;
    }
    
    /* Diagram area */
    .diagram-wrapper {
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
      padding: 20px 0;
    }
    
    .flow-diagram {
      width: 100%;
      max-width: 1000px;
      margin: 0 auto;
    }
    
    .flow-diagram svg {
      width: 100%;
      height: auto;
    }
    
    /* Node styles */
    .node-box {
      fill: #fff;
      stroke: #cbd5e1;
      stroke-width: 1.5;
      transition: all 0.3s ease;
    }
    
    .node-box.core {
      stroke: #0891b2;
      fill: rgba(8,145,178,0.03);
    }
    
    .node-box.active {
      stroke: #0891b2;
      stroke-width: 2;
      filter: drop-shadow(0 2px 8px rgba(8,145,178,0.15));
    }
    
    .node-label {
      fill: #334155;
      font-family: 'Inter', sans-serif;
      font-size: 11px;
      font-weight: 500;
      text-anchor: middle;
    }
    
    .node-sublabel {
      fill: #64748b;
      font-family: 'Inter', sans-serif;
      font-size: 9px;
      text-anchor: middle;
    }
    
    /* Flow lines */
    .flow-line {
      stroke: #94a3b8;
      stroke-width: 1.5;
      fill: none;
    }
    
    .flow-line.core {
      stroke: #0891b2;
    }
    
    .flow-line.residual {
      stroke: #f59e0b;
    }
    
    /* Legend on diagram */
    .legend-box {
      font-family: 'Inter', sans-serif;
    }
    
    .legend-text {
      fill: #64748b;
      font-size: 9px;
    }
    
    .legend-title {
      fill: #334155;
      font-size: 9px;
      font-weight: 600;
    }
    
    /* Footer panel */
    .footer-panel {
      background: #f8fafc;
      border-top: 1px solid #e2e8f0;
      padding: 32px 5%;
    }
    
    .footer-content {
      max-width: 1400px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: 300px 1fr;
      gap: 60px;
    }
    
    /* Stages list */
    .stages-list {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }
    
    .stage-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 10px 14px;
      border-radius: 4px;
      cursor: pointer;
      transition: all 0.25s ease;
      border-left: 3px solid transparent;
    }
    
    .stage-item:hover {
      background: rgba(8,145,178,0.05);
    }
    
    .stage-item.active {
      background: rgba(8,145,178,0.08);
      border-left-color: #0891b2;
    }
    
    .stage-number {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background: #e2e8f0;
      color: #64748b;
      font-size: 12px;
      font-weight: 600;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.25s ease;
    }
    
    .stage-item.active .stage-number {
      background: #0891b2;
      color: #fff;
    }
    
    .stage-name {
      font-size: 13px;
      font-weight: 500;
      color: #334155;
      transition: color 0.25s ease;
    }
    
    .stage-item.active .stage-name {
      color: #0891b2;
    }
    
    /* Description */
    .stage-description {
      display: flex;
      flex-direction: column;
      justify-content: center;
    }
    
    .desc-title {
      font-size: 14px;
      font-weight: 600;
      color: #0891b2;
      margin-bottom: 8px;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }
    
    .desc-text {
      font-size: 14px;
      color: #475569;
      line-height: 1.7;
      max-width: 600px;
    }
    
    /* Responsive */
    @media (max-width: 900px) {
      .footer-content {
        grid-template-columns: 1fr;
        gap: 24px;
      }
      
      .stages-list {
        flex-direction: row;
        flex-wrap: wrap;
        gap: 8px;
      }
      
      .stage-item {
        padding: 8px 12px;
      }
    }
  </style>
</head>
<body>
  <section class="screen2">
    <div class="container">
      <div class="section-header">
        <h2 class="section-title">How It Works</h2>
      </div>
      
      <div class="diagram-wrapper">
        <div class="flow-diagram">
          <svg viewBox="0 0 900 380" fill="none" xmlns="http://www.w3.org/2000/svg">
            <!-- Arrow markers -->
            <defs>
              <marker id="arrow" markerWidth="8" markerHeight="8" refX="7" refY="4" orient="auto">
                <path d="M1,1 L7,4 L1,7" fill="none" stroke="#94a3b8" stroke-width="1.5"/>
              </marker>
              <marker id="arrowCore" markerWidth="8" markerHeight="8" refX="7" refY="4" orient="auto">
                <path d="M1,1 L7,4 L1,7" fill="none" stroke="#0891b2" stroke-width="1.5"/>
              </marker>
              <marker id="arrowResidual" markerWidth="8" markerHeight="8" refX="7" refY="4" orient="auto">
                <path d="M1,1 L7,4 L1,7" fill="none" stroke="#f59e0b" stroke-width="1.5"/>
              </marker>
            </defs>
            
            <!-- Flow lines -->
            <!-- Feed to Intake -->
            <path d="M 95 100 L 140 100" class="flow-line" marker-end="url(#arrow)"/>
            
            <!-- Intake to Gas-Sorbent -->
            <path d="M 260 100 L 310 100" class="flow-line core" marker-end="url(#arrowCore)"/>
            
            <!-- Gas input -->
            <path d="M 370 45 L 370 70" class="flow-line" marker-end="url(#arrow)"/>
            
            <!-- Gas-Sorbent to Sorption -->
            <path d="M 430 100 L 480 100" class="flow-line core" marker-end="url(#arrowCore)"/>
            
            <!-- Sorption to Separation -->
            <path d="M 600 100 L 650 100" class="flow-line core" marker-end="url(#arrowCore)"/>
            
            <!-- Separation to Mineralization -->
            <path d="M 770 100 L 820 100" class="flow-line" marker-end="url(#arrow)"/>
            
            <!-- Residual output from Separation -->
            <path d="M 710 130 L 710 180" class="flow-line residual" marker-end="url(#arrowResidual)"/>
            
            <!-- Nodes -->
            <!-- Feed Water -->
            <g class="node" data-stage="0">
              <rect class="node-box" x="20" y="70" width="75" height="60" rx="3"/>
              <text class="node-label" x="57" y="95">Feed Water</text>
              <text class="node-sublabel" x="57" y="110">Seawater / Brackish</text>
            </g>
            
            <!-- 1. Intake & Stabilization -->
            <g class="node" data-stage="1">
              <rect class="node-box" id="node1" x="140" y="70" width="120" height="60" rx="3"/>
              <text class="node-label" x="200" y="95">Intake</text>
              <text class="node-sublabel" x="200" y="110">& Stabilization</text>
            </g>
            
            <!-- Gas Input -->
            <g class="node" data-stage="0">
              <rect class="node-box" x="320" y="15" width="100" height="30" rx="3"/>
              <text class="node-sublabel" x="370" y="35">Inert gas + Sorbent</text>
            </g>
            
            <!-- 2. Gas-Sorbent Dosing -->
            <g class="node" data-stage="2">
              <rect class="node-box core" id="node2" x="310" y="70" width="120" height="60" rx="3"/>
              <text class="node-label" x="370" y="95">Gas-Sorbent</text>
              <text class="node-sublabel" x="370" y="110">Dosing</text>
            </g>
            
            <!-- 3. Sorption (Contactor) -->
            <g class="node" data-stage="3">
              <rect class="node-box core" id="node3" x="480" y="70" width="120" height="60" rx="3"/>
              <text class="node-label" x="540" y="95">Sorption</text>
              <text class="node-sublabel" x="540" y="110">(Contactor)</text>
            </g>
            
            <!-- 4. Separation (Phase split) -->
            <g class="node" data-stage="4">
              <rect class="node-box core" id="node4" x="650" y="70" width="120" height="60" rx="3"/>
              <text class="node-label" x="710" y="95">Separation</text>
              <text class="node-sublabel" x="710" y="110">(Phase split)</text>
            </g>
            
            <!-- 5. Mineralization & Polishing -->
            <g class="node" data-stage="5">
              <rect class="node-box" id="node5" x="820" y="70" width="120" height="60" rx="3"/>
              <text class="node-label" x="880" y="90">Mineralization</text>
              <text class="node-sublabel" x="880" y="105">& Polishing</text>
              <text class="node-sublabel" x="880" y="118" style="fill: #0891b2;">→ Drinking Water</text>
            </g>
            
            <!-- Residual -->
            <g class="node" data-stage="0">
              <rect class="node-box" x="655" y="185" width="110" height="40" rx="3" style="stroke: #f59e0b; fill: rgba(245,158,11,0.03);"/>
              <text class="node-sublabel" x="710" y="202" style="fill: #b45309;">Concentrate/Residual</text>
              <text class="node-sublabel" x="710" y="215" style="fill: #92400e;">&lt;5% of flow</text>
            </g>
            
            <!-- Legend v2 -->
            <g class="legend-box" transform="translate(20, 260)">
              <text class="legend-title" x="0" y="0">Legend</text>
              
              <!-- Core module -->
              <rect x="0" y="12" width="14" height="14" rx="2" fill="rgba(8,145,178,0.03)" stroke="#0891b2" stroke-width="1.5"/>
              <text class="legend-text" x="22" y="23">AQUINTAQA core module boundary (encapsulated/protected)</text>
              
              <!-- COTS -->
              <rect x="0" y="34" width="14" height="14" rx="2" fill="#fff" stroke="#cbd5e1" stroke-width="1.5"/>
              <text class="legend-text" x="22" y="45">COTS-based auxiliary systems (intake, utilities, polishing, controls)</text>
              
              <!-- Note -->
              <text class="legend-text" x="0" y="68" style="font-style: italic;">Note: sensitive setpoints, materials, and core control logic are disclosed stepwise under NDA.</text>
              <text class="legend-text" x="0" y="82" style="font-style: italic;">Colour coding applies to modules only, not to streams.</text>
            </g>
          </svg>
        </div>
      </div>
    </div>
    
    <!-- Footer panel -->
    <div class="footer-panel">
      <div class="footer-content">
        <div class="stages-list">
          <div class="stage-item active" data-stage="1">
            <span class="stage-number">1</span>
            <span class="stage-name">Intake & Stabilization</span>
          </div>
          <div class="stage-item" data-stage="2">
            <span class="stage-number">2</span>
            <span class="stage-name">Gas-Sorbent Dosing</span>
          </div>
          <div class="stage-item" data-stage="3">
            <span class="stage-number">3</span>
            <span class="stage-name">Sorption (Contactor)</span>
          </div>
          <div class="stage-item" data-stage="4">
            <span class="stage-number">4</span>
            <span class="stage-name">Separation (Phase split)</span>
          </div>
          <div class="stage-item" data-stage="5">
            <span class="stage-number">5</span>
            <span class="stage-name">Mineralization & Polishing</span>
          </div>
        </div>
        
        <div class="stage-description">
          <div class="desc-title" id="descTitle">Intake & Stabilization</div>
          <div class="desc-text" id="descText">Coarse protection against debris, flow stabilisation and optional baseline pH/oxygen conditioning. No heavy pre-treatment trains required.</div>
        </div>
      </div>
    </div>
  </section>
  
  <script>
    // Stage descriptions - exact naming
    const stageData = {
      1: {
        title: 'Intake & Stabilization',
        text: 'Coarse protection against debris, flow stabilisation and optional baseline pH/oxygen conditioning. No heavy pre-treatment trains required.'
      },
      2: {
        title: 'Gas-Sorbent Dosing',
        text: 'An inert carrier gas with fine-dispersed proprietary sorbent is dosed into the flow. Active capture centres are formed, preparing the solution for selective ion extraction.'
      },
      3: {
        title: 'Sorption (Contactor)',
        text: 'Salt ions, hardness and dissolved organics are bound to the sorbent surface. The process runs under mild conditions — no membranes, no high pressures, no boiling.'
      },
      4: {
        title: 'Separation (Phase split)',
        text: 'Purified water is separated from the loaded sorbent by mechanical/physical means. No reverse osmosis or thermal distillation required. Residual stream is &lt;5% of input flow.'
      },
      5: {
        title: 'Mineralization & Polishing',
        text: 'Precise remineralisation to drinking water profile (TDS ~100-150 mg/L), Ca/Mg balance, pH 7.2-7.8. Optional UV/ozone disinfection. Ready-to-drink output.'
      }
    };
    
    let currentStage = 1;
    let autoPlayInterval;
    let isHovering = false;
    
    const stageItems = document.querySelectorAll('.stage-item');
    const descTitle = document.getElementById('descTitle');
    const descText = document.getElementById('descText');
    
    // Update active stage
    function setActiveStage(stage) {
      currentStage = stage;
      
      // Update list
      stageItems.forEach(item => {
        item.classList.toggle('active', parseInt(item.dataset.stage) === stage);
      });
      
      // Update diagram nodes
      for (let i = 1; i <= 5; i++) {
        const node = document.getElementById(`node${i}`);
        if (node) {
          node.classList.toggle('active', i === stage);
        }
      }
      
      // Update description with transition
      const data = stageData[stage];
      if (data) {
        descTitle.textContent = data.title;
        descText.innerHTML = data.text;
      }
    }
    
    // Auto-cycle: 4 seconds per stage
    function startAutoCycle() {
      autoPlayInterval = setInterval(() => {
        if (!isHovering) {
          currentStage = currentStage >= 5 ? 1 : currentStage + 1;
          setActiveStage(currentStage);
        }
      }, 4000);
    }
    
    // Event listeners for hover/focus on stage list
    stageItems.forEach(item => {
      item.addEventListener('mouseenter', () => {
        isHovering = true;
        setActiveStage(parseInt(item.dataset.stage));
      });
      
      item.addEventListener('mouseleave', () => {
        isHovering = false;
      });
      
      item.addEventListener('focus', () => {
        isHovering = true;
        setActiveStage(parseInt(item.dataset.stage));
      });
      
      item.addEventListener('blur', () => {
        isHovering = false;
      });
    });
    
    // Start with stage 1 and begin auto-cycle
    setActiveStage(1);
    startAutoCycle();
  </script>
</body>
</html>
